<html>
  <head>
    <title>German Declension Explorer</title>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>
    <script type="text/javascript">
    var suffixe = {
      nominativ : {
          masculinen : '',
          neutral    : '',
          femininum  : 'e',
          plural     : 'e'
      },
      akkusativ : {
          masculinen : 'en',
          neutral    : '',
          femininum  : 'e',
          plural     : 'e'
      },
      dativ     : {
          masculinen : 'em',
          neutral    : 'em',
          femininum  : 'er',
          plural     : 'en'
      },
      genitiv   : {
          masculinen : 'es',
          neutral    : 'es',
          femininum  : 'er',
          plural     : 'er'
      }
    };
    var bestimmt_suffixe = {
      nominativ : {
        masculinen : 'er',
        neutral    : 'es'
      },
      akkusativ : {
        neutral    : 'es'
      }
    };
    var ausnahmen = {
      d : {
        nominativ : {
          neutral   : 'das',
          femininum : 'die',
          plural    : 'die'
        },
        akkusativ : {
          neutral   : 'das',
          femininum : 'die',
          plural    : 'die'
        }
      },
      'eur-' : {
        nominativ : {
          masculinen : 'euer',
          neutral    : 'euer'
        },
        akkusativ : {
          neutral    : 'euer'
        }
      }
    };
    function suffix(group, stamm, fall, geschlecht) {
      if (group == 'bestimmt' && bestimmt_suffixe[fall] && bestimmt_suffixe[fall][geschlecht]) {
        return bestimmt_suffixe[fall][geschlecht];
      } else {
        return suffixe[fall][geschlecht];
      }
    }
    function deklination(group, stamm, fall, geschlecht) {
      if (stamm == 'der/die/das') {
        stamm = 'd';
      }
      if (ausnahmen[stamm] && ausnahmen[stamm][fall] && ausnahmen[stamm][fall][geschlecht]) {
        return ausnahmen[stamm][fall][geschlecht];
      } else {
        var s = suffix(group, stamm, fall, geschlecht);
        return (stamm ? stamm.replace('-','') : (s ? '-' : '')) + s;
      }
    }
    function render() {
      var stamm = $('#stamm').val();
      var group = $('#stamm option:selected').parent('optgroup').attr('label');
      document.location.hash = stamm;
      for (var fall in suffixe) {
        for (var geschlecht in suffixe[fall]) {
          $('tr.' + fall + ' > td.' + geschlecht).text(
            deklination(group, stamm, fall, geschlecht)
          );
        }
      }
    };
    $(document).ready(function () {
      $('#stamm').change(render).val(document.location.hash.replace('#', '')).change();
    });
    </script>
    <style>
      body {
        width:500px;
        margin: 0 auto;
        text-align: center;
      }
      table {
        width: 500px;
      }
      td, th {
        width: 20%;
      }
      th {
        text-align: left;
      }
      th:first-child {
        text-align: right;
      }
    </style>
  </head>
  <body>
    <h1>Deutsch Deklination Explorer</h1>
    <form>
      <label for="stamm">stamm:</label>
      <select id="stamm">
        <optgroup label="unbestimmt">
          <option></option>
          <option>ein-</option>
          <option>kein-</option>
          <option>mein-</option>
          <option>dein-</option>
          <option>sein-</option>
          <option>ihr-</option>
          <option>unser-</option>
          <option>eur-</option>
        </optgroup>
        <optgroup label="bestimmt">
          <option></option>
          <option>der/die/das</option>
          <option>dies-</option>
          <option>jen-</option>
          <option>welch-</option>
        </optgroup>
      </select>
    </form>
    <table>
      <tbody>
        <tr>
          <th></th>
          <th>masculinen</th>
          <th>neutral</th>
          <th>femininum</th>
          <th>plural</th>
        </tr>
        <tr class="nominativ">
          <th>nominativ</th>
          <td class="masculinen"></td>
          <td class="neutral"   ></td>
          <td class="femininum" ></td>
          <td class="plural"    ></td>
        </tr>
        <tr class="akkusativ">
          <th>akkusativ</th>
          <td class="masculinen"></td>
          <td class="neutral"   ></td>
          <td class="femininum" ></td>
          <td class="plural"    ></td>
        </tr>
        <tr class="dativ">
          <th>dativ</th>
          <td class="masculinen"></td>
          <td class="neutral"   ></td>
          <td class="femininum" ></td>
          <td class="plural"    ></td>
        </tr>
        <tr class="genitiv">
          <th>genitiv</th>
          <td class="masculinen"></td>
          <td class="neutral"   ></td>
          <td class="femininum" ></td>
          <td class="plural"    ></td>
        </tr>
      </tbody>
    </table>
  </body>
</html>